!function(){[Element,Window,Document].invoke("implement",{hasEvent:function(n){var e=this.retrieve("events"),t=e&&e[n]?e[n].values:null;if(t)for(var o=t.length;o--;)if(o in t)return!0;return!1}});function e(n,t,o){return t=n[t],o=n[o],function(n,e){o&&!this.hasEvent(e)&&o.call(this,n,e),t&&t.call(this,n,e)}}function i(t,o,i){return function(n,e){o[i].call(this,n,e),t[i].call(this,n,e)}}var c=Element.Events;Element.defineCustomEvent=function(n,t){var o=c[t.base];return t.onAdd=e(t,"onAdd","onSetup"),t.onRemove=e(t,"onRemove","onTeardown"),c[n]=o?Object.append({},t,{base:o.base,condition:function(n,e){return(!o.condition||o.condition.call(this,n,e))&&(!t.condition||t.condition.call(this,n,e))},onAdd:i(t,o,"onAdd"),onRemove:i(t,o,"onRemove")}):t,this},Element.enableCustomEvents=function(){Object.each(c,function(n,e){n.onEnable&&n.onEnable.call(n,e)})},Element.disableCustomEvents=function(){Object.each(c,function(n,e){n.onDisable&&n.onDisable.call(n,e)})}}(),Browser.Features.Touch=function(){try{return document.createEvent("TouchEvent").initTouchEvent("touchstart"),!0}catch(n){}return!1}(),Browser.Features.iOSTouch=function(){var n="cantouch",e=document.html,t=!1;if(e.addEventListener){var o=function(){e.removeEventListener(n,o,!0),t=!0};try{e.addEventListener(n,o,!0);var i=document.createEvent("TouchEvent");return i.initTouchEvent(n),e.dispatchEvent(i),t}catch(n){}o()}return!1}(),function(){function n(){u=!1}var c,u,a="swipe",r={},e={touchstart:function(n){1<n.touches.length||(n=n.touches[0],u=!0,r={x:n.pageX,y:n.pageY})},touchmove:function(n){var e,t,o,i;!c&&u&&(e={x:(e=n.changedTouches[0]).pageX,y:e.pageY},this.retrieve("swipe:cancelVertical")&&10<Math.abs(r.y-e.y)?u=!1:(t=this.retrieve("swipe:distance",50),i=(o=e.x-r.x)<-t,(t<o||i)&&(n.preventDefault(),u=!1,n.direction=i?"left":"right",n.start=r,n.end=e,this.fireEvent(a,n))))},touchend:n,touchcancel:n};Element.defineCustomEvent(a,{onSetup:function(){this.addEvents(e)},onTeardown:function(){this.removeEvents(e)},onEnable:function(){c=!1},onDisable:function(){c=!0,n()}})}();